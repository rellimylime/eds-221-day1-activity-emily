<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>stl_lead_inequity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="stl_lead_inequity_files/libs/clipboard/clipboard.min.js"></script>
<script src="stl_lead_inequity_files/libs/quarto-html/quarto.js"></script>
<script src="stl_lead_inequity_files/libs/quarto-html/popper.min.js"></script>
<script src="stl_lead_inequity_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="stl_lead_inequity_files/libs/quarto-html/anchor.min.js"></script>
<link href="stl_lead_inequity_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="stl_lead_inequity_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="stl_lead_inequity_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="stl_lead_inequity_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="stl_lead_inequity_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">stl_lead_inequity</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="data-import-and-exploration" class="level2">
<h2 class="anchored" data-anchor-id="data-import-and-exploration">Data import and exploration</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'

The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
</div>
<section id="read-data" class="level3">
<h3 class="anchored" data-anchor-id="read-data">Read data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>stl_lead <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"stl_blood_lead.csv"</span>))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># clean data</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>stl_lead <span class="ot">&lt;-</span> stl_lead <span class="sc">%&gt;%</span> <span class="fu">clean_names</span>()</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get data summary</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(stl_lead)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">stl_lead</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">106</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name_lsad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">geo_id</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.951011e+10</td>
<td style="text-align: right;">8132.85</td>
<td style="text-align: right;">29510101100</td>
<td style="text-align: right;">2.951011e+10</td>
<td style="text-align: right;">2.951011e+10</td>
<td style="text-align: right;">2.951012e+10</td>
<td style="text-align: right;">2.951013e+10</td>
<td style="text-align: left;">▇▇▆▃▆</td>
</tr>
<tr class="even">
<td style="text-align: left;">tract_ce</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.133859e+05</td>
<td style="text-align: right;">8132.85</td>
<td style="text-align: right;">101100</td>
<td style="text-align: right;">1.064250e+05</td>
<td style="text-align: right;">1.123500e+05</td>
<td style="text-align: right;">1.191018e+05</td>
<td style="text-align: right;">1.276000e+05</td>
<td style="text-align: left;">▇▇▆▃▆</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_tested</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.373700e+02</td>
<td style="text-align: right;">414.18</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">4.110000e+02</td>
<td style="text-align: right;">6.940000e+02</td>
<td style="text-align: right;">9.232500e+02</td>
<td style="text-align: right;">2.116000e+03</td>
<td style="text-align: left;">▆▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">pct_elevated</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.016000e+01</td>
<td style="text-align: right;">6.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.590000e+00</td>
<td style="text-align: right;">9.480000e+00</td>
<td style="text-align: right;">1.438000e+01</td>
<td style="text-align: right;">2.328000e+01</td>
<td style="text-align: left;">▇▇▇▅▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total_pop</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.998580e+03</td>
<td style="text-align: right;">1263.14</td>
<td style="text-align: right;">620</td>
<td style="text-align: right;">2.025000e+03</td>
<td style="text-align: right;">2.911500e+03</td>
<td style="text-align: right;">3.784500e+03</td>
<td style="text-align: right;">7.069000e+03</td>
<td style="text-align: left;">▅▇▆▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_pop_moe</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.533500e+02</td>
<td style="text-align: right;">140.30</td>
<td style="text-align: right;">94</td>
<td style="text-align: right;">2.495000e+02</td>
<td style="text-align: right;">3.335000e+02</td>
<td style="text-align: right;">4.395000e+02</td>
<td style="text-align: right;">8.320000e+02</td>
<td style="text-align: left;">▅▇▃▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.371720e+03</td>
<td style="text-align: right;">1293.40</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8.850000e+01</td>
<td style="text-align: right;">1.290000e+03</td>
<td style="text-align: right;">2.168250e+03</td>
<td style="text-align: right;">6.128000e+03</td>
<td style="text-align: left;">▇▅▃▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">white_moe</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.013800e+02</td>
<td style="text-align: right;">145.21</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">6.050000e+01</td>
<td style="text-align: right;">2.125000e+02</td>
<td style="text-align: right;">2.997500e+02</td>
<td style="text-align: right;">7.510000e+02</td>
<td style="text-align: left;">▇▇▅▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.429870e+03</td>
<td style="text-align: right;">1038.31</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">6.332500e+02</td>
<td style="text-align: right;">1.334500e+03</td>
<td style="text-align: right;">2.029000e+03</td>
<td style="text-align: right;">4.572000e+03</td>
<td style="text-align: left;">▇▆▃▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">black_moe</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.883800e+02</td>
<td style="text-align: right;">148.84</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">1.832500e+02</td>
<td style="text-align: right;">2.690000e+02</td>
<td style="text-align: right;">3.792500e+02</td>
<td style="text-align: right;">7.600000e+02</td>
<td style="text-align: left;">▆▇▆▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">poverty_tot</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.869400e+02</td>
<td style="text-align: right;">528.61</td>
<td style="text-align: right;">158</td>
<td style="text-align: right;">4.085000e+02</td>
<td style="text-align: right;">6.515000e+02</td>
<td style="text-align: right;">9.557500e+02</td>
<td style="text-align: right;">2.801000e+03</td>
<td style="text-align: left;">▇▅▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">poverty_tot_moe</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.705000e+02</td>
<td style="text-align: right;">156.11</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">1.602500e+02</td>
<td style="text-align: right;">2.415000e+02</td>
<td style="text-align: right;">3.375000e+02</td>
<td style="text-align: right;">1.049000e+03</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">poverty_u18</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.497500e+02</td>
<td style="text-align: right;">262.60</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.650000e+01</td>
<td style="text-align: right;">1.735000e+02</td>
<td style="text-align: right;">3.417500e+02</td>
<td style="text-align: right;">1.320000e+03</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">poverty_u18_moe</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.400800e+02</td>
<td style="text-align: right;">107.48</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.125000e+01</td>
<td style="text-align: right;">1.205000e+02</td>
<td style="text-align: right;">1.947500e+02</td>
<td style="text-align: right;">5.950000e+02</td>
<td style="text-align: left;">▇▆▂▁▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(stl_lead)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 106  15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(stl_lead)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "geo_id"          "tract_ce"        "name_lsad"       "count_tested"   
 [5] "pct_elevated"    "total_pop"       "total_pop_moe"   "white"          
 [9] "white_moe"       "black"           "black_moe"       "poverty_tot"    
[13] "poverty_tot_moe" "poverty_u18"     "poverty_u18_moe"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> stl_lead, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> poverty_tot <span class="sc">/</span> total_pop, <span class="at">y =</span> pct_elevated)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Percent Poverty vs Percent Elevated"</span>, <span class="at">x =</span> <span class="st">"Percent Population in Poverty"</span>, <span class="at">y =</span> <span class="st">"Percent Elevated"</span>) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stl_lead_inequity_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#stl_lead_prop &lt;- stl_lead %&gt;% dplyr::mutate(prop_white = white / total_pop)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>stl_lead_prop <span class="ot">&lt;-</span> stl_lead</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>stl_lead_prop<span class="sc">$</span>prop_white <span class="ot">&lt;-</span> (stl_lead_prop<span class="sc">$</span>white <span class="sc">/</span> stl_lead_prop<span class="sc">$</span>total_pop) </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>stl_lead_prop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         geo_id tract_ce            name_lsad count_tested pct_elevated
1   29510118100   118100    Census Tract 1181          345         9.57
2   29510117400   117400    Census Tract 1174          871        12.06
3   29510126700   126700    Census Tract 1267          458        18.12
4   29510119102   119102 Census Tract 1191.02          182         2.20
5   29510126800   126800    Census Tract 1268          486         4.73
6   29510126900   126900    Census Tract 1269         1296        15.66
7   29510108100   108100    Census Tract 1081          903        11.41
8   29510127000   127000    Census Tract 1270          585        10.94
9   29510127400   127400    Census Tract 1274         2116         3.12
10  29510103700   103700    Census Tract 1037          417         3.36
11  29510103800   103800    Census Tract 1038          758         3.03
12  29510123100   123100    Census Tract 1231          928        10.67
13  29510104500   104500    Census Tract 1045          248         4.84
14  29510106100   106100    Census Tract 1061          796        18.97
15  29510126600   126600    Census Tract 1266         1263         7.13
16  29510114102   114102 Census Tract 1141.02          874         2.63
17  29510116302   116302 Census Tract 1163.02         1203        18.37
18  29510105500   105500    Census Tract 1055          745        11.95
19  29510116301   116301 Census Tract 1163.01          650        10.00
20  29510106400   106400    Census Tract 1064          758        17.55
21  29510119101   119101 Census Tract 1191.01          135         1.48
22  29510105200   105200    Census Tract 1052          393        13.99
23  29510105300   105300    Census Tract 1053          694        11.67
24  29510114101   114101 Census Tract 1141.01         1026         7.41
25  29510127100   127100    Census Tract 1271          661         9.38
26  29510127200   127200    Census Tract 1272          660         4.09
27  29510105400   105400    Census Tract 1054          982         9.88
28  29510127300   127300    Census Tract 1273          883         7.47
29  29510125600   125600    Census Tract 1256          396         3.54
30  29510127500   127500    Census Tract 1275          807         3.72
31  29510125700   125700    Census Tract 1257         1820         3.46
32  29510127600   127600    Census Tract 1276          351         4.56
33  29510123300   123300    Census Tract 1233          451        10.64
34  29510104200   104200    Census Tract 1042          268         5.97
35  29510103600   103600    Census Tract 1036          248         5.24
36  29510124100   124100    Census Tract 1241         1657        22.09
37  29510105198   105198 Census Tract 1051.98          238         5.04
38  29510124200   124200    Census Tract 1242         1109        17.67
39  29510124300   124300    Census Tract 1243          529        13.23
40  29510123200   123200    Census Tract 1232          409         3.42
41  29510124600   124600    Census Tract 1246          721        10.12
42  29510125500   125500    Census Tract 1255          279         5.02
43  29510101800   101800    Census Tract 1018          713        13.88
44  29510106500   106500    Census Tract 1065          909        15.73
45  29510102100   102100    Census Tract 1021          491         3.26
46  29510102200   102200    Census Tract 1022          958         2.92
47  29510106600   106600    Census Tract 1066          640        23.28
48  29510103100   103100    Census Tract 1031          574         1.74
49  29510106300   106300    Census Tract 1063          702        16.95
50  29510107200   107200    Census Tract 1072          426        19.72
51  29510103400   103400    Census Tract 1034          363         4.41
52  29510106700   106700    Census Tract 1067          899        21.25
53  29510102500   102500    Census Tract 1025          342         6.73
54  29510107400   107400    Census Tract 1074          940        20.00
55  29510101100   101100    Census Tract 1011          352         4.55
56  29510107500   107500    Census Tract 1075          812        14.90
57  29510112100   112100    Census Tract 1121          322         4.35
58  29510107600   107600    Census Tract 1076          623        13.32
59  29510116500   116500    Census Tract 1165         1084        14.39
60  29510101200   101200    Census Tract 1012          641         2.96
61  29510101300   101300    Census Tract 1013          728         6.18
62  29510111100   111100    Census Tract 1111          497         6.44
63  29510101400   101400    Census Tract 1014          638         9.09
64  29510101500   101500    Census Tract 1015          877         8.21
65  29510111200   111200    Census Tract 1112          401        13.97
66  29510110300   110300    Census Tract 1103          694        16.57
67  29510111300   111300    Census Tract 1113          426        16.43
68  29510111400   111400    Census Tract 1114          538        19.52
69  29510111500   111500    Census Tract 1115          263        10.27
70  29510112200   112200    Census Tract 1122          506        16.01
71  29510115400   115400    Census Tract 1154          782         7.93
72  29510115500   115500    Census Tract 1155         1707        14.35
73  29510115600   115600    Census Tract 1156         1531        12.67
74  29510119200   119200    Census Tract 1192          257         4.67
75  29510119300   119300    Census Tract 1193          163         6.75
76  29510120200   120200    Census Tract 1202          446        13.90
77  29510114200   114200    Census Tract 1142          891         2.47
78  29510114300   114300    Census Tract 1143         1324         3.85
79  29510115100   115100    Census Tract 1151          907         7.39
80  29510110400   110400    Census Tract 1104          824        22.45
81  29510110500   110500    Census Tract 1105          449        23.16
82  29510110100   110100    Census Tract 1101          964        17.12
83  29510110200   110200    Census Tract 1102          784        19.52
84  29510112300   112300    Census Tract 1123          855        13.10
85  29510116100   116100    Census Tract 1161          852         9.39
86  29510116200   116200    Census Tract 1162          890         7.42
87  29510116400   116400    Census Tract 1164         1805        19.83
88  29510107300   107300    Census Tract 1073         1427        10.86
89  29510118400   118400    Census Tract 1184           23         0.00
90  29510118600   118600    Census Tract 1186          394         8.38
91  29510113500   113500    Census Tract 1135          289         4.15
92  29510117100   117100    Census Tract 1171          188         7.45
93  29510115700   115700    Census Tract 1157         1390        17.55
94  29510121200   121200    Census Tract 1212         1142         4.20
95  29510121100   121100    Census Tract 1211          368         3.53
96  29510115200   115200    Census Tract 1152         1003        10.57
97  29510108200   108200    Census Tract 1082          609         9.85
98  29510108300   108300    Census Tract 1083          689         9.58
99  29510112400   112400    Census Tract 1124          306         4.25
100 29510115300   115300    Census Tract 1153         1659         8.80
101 29510117200   117200    Census Tract 1172         1314         7.69
102 29510102300   102300    Census Tract 1023          298         4.36
103 29510109700   109700    Census Tract 1097         1070        15.79
104 29510102400   102400    Census Tract 1024          544         8.82
105 29510106200   106200    Census Tract 1062         1107        11.38
106 29510109600   109600    Census Tract 1096          952        21.74
    total_pop total_pop_moe white white_moe black black_moe poverty_tot
1        1161           192   414       100   724       179         324
2        4307           447  2604       303  1338       374         615
3        1089           199   432       116   631       187         506
4        3237           309  2008       262   646       210         958
5        3490           231  3026       270   194        98         349
6        4590           826   148       217  4320       760        1743
7        3144           464   108       111  3020       442         652
8        2052           273   304        82  1739       283         331
9        5486           516  1777       391  3603       621        2524
10       2408           274  2149       212   156       190         254
11       3902           279  3444       271   340       259         195
12       3650           454   994       190  2556       470         598
13       1597           262  1297       226   147        96         191
14       1724           240    12        12  1679       229         709
15       3495           466   611       251  2878       429        1483
16       4002           264  3871       253   116       105         289
17       2477           318   773       263   997       241         909
18       2993           384   126       116  2800       398         942
19       3608           418  2532       398   694       311         486
20       2445           370    18        28  2397       373         737
21       2587           275  1283       196   887       169         788
22       2977           265  1278       201  1437       264         368
23       2450           359   234       136  2102       307         698
24       4334           424  3138       332   870       360         769
25       2024           247    67        53  1952       242         847
26       4486           584  3212       347   900       613         626
27       2337           322   221       132  1921       310         802
28       3527           312  1328       235  2029       317        1092
29       4185           463  1883       322  2026       443         495
30       2489           268   472        89  1977       278         819
31       3752           484    38        40  3707       484        2450
32       3129           268  2469       266   547       227         307
33       2920           251  2008       229   836       193         365
34       3435           282  3017       243   193       133         403
35       1448           155  1125       161    46        53         262
36       5304           690  1490       392  3219       587        2398
37       3483           337  2643       317   454       227         831
38       3382           517   931       228  2029       401        1375
39       2964           249  2166       231   690       119         506
40       2210           198  1447       155   640       125         425
41       1943           194   644       128  1143       162        1197
42       2903           316  1869       217   790       182         473
43       3452           468  2160       317  1077       291        1044
44       2852           364   133        73  2680       343         646
45       2802           287  2294       260   319       214         260
46       6367           351  6128       365    59        50         354
47       1709           270    17        31  1683       273         878
48       3220           255  2774       352   346       241         264
49       1455           236    16        18  1406       235         432
50       1156           212     6        10  1128       205         452
51       1874           121  1798       122    43        38         190
52       2960           558     2         4  2914       553        1278
53       2028           199  1749       203    94        49         216
54       2968           426    31        36  2937       428        1416
55       2591           267  2113       257   143       128         240
56       2420           358    29        35  2346       352         594
57       4432           508  2846       371  1292       370         542
58       2197           238    42        55  2150       248         751
59       4481           535  2091       411  1617       387        1158
60       3275           253  3026       283    87        71         436
61       4040           352  3364       306   404       273         260
62       1814           307    54        44  1743       306         901
63       2750           247  1705       233   697       191         572
64       3771           570  2169       498  1340       389        1119
65       1021           221    59        43   928       208         507
66       1968           356    52        46  1916       371         513
67       1348           213     4         6  1344       213         426
68       1396           379    11         7  1357       381         549
69        620            94     1         4   597       120         350
70       1645           238   117        56  1528       241         612
71       3185           390  1999       290   806       265         888
72       7069           832  3227       751  3543       690        2801
73       4815           585  2164       436  2315       472        1759
74       1746           233   606       205  1005       177         314
75       4319           501  2320       440  1115       180        1317
76       1370           232   169       117  1126       210         737
77       4724           391  3713       515   522       243         664
78       5300           386  4674       370   163       144         234
79       4226           444  3465       416   413       161         973
80       2147           357     6         9  2115       365         626
81       1013           155     5         6   995       151         367
82       2879           387    39        45  2787       396         887
83       2309           444     6        10  2281       443         949
84       2038           409    23        26  1987       411         920
85       3231           409  1638       252   839       248         756
86       4267           365  2977       386   851       247         532
87       4913           616  1350       352  2871       496        1850
88       4675           492    72        71  4572       489        1362
89       1557           317   949       275   418        88         267
90       3822           414  2011       254  1331       361         914
91       2231           164  2166       156    37        52         304
92       1469           163  1052       138   264       104         158
93       3789           537  1792       401  1695       474        1714
94       2508           331    35        42  2446       336        1606
95       1779           280   220        74  1503       281         889
96       3348           379  1484       259  1419       282        1084
97       2504           358    82        57  2359       364         651
98       1987           215   119        93  1848       227         501
99       4132           336  2553       330  1077       284         656
100      5248           538  2810       331  1680       461        1133
101      5566           606  2719       389  2470       434        1326
102      1987           218  1840       213    35        49         351
103      2239           357   274       184  1949       329        1212
104      2673           205  2387       225   224       155         642
105      1825           325     9        20  1807       331        1176
106      3222           555    45        40  3153       548         845
    poverty_tot_moe poverty_u18 poverty_u18_moe   prop_white
1               140         109             105 0.3565891473
2               255         169             156 0.6045971674
3               164          98              60 0.3966942149
4               234          15              25 0.6203274637
5               129          35              47 0.8670487106
6               825         627             595 0.0322440087
7               305         256             136 0.0343511450
8               156          47              79 0.1481481481
9               598        1110             318 0.3239154211
10               88          15              23 0.8924418605
11               78          27              30 0.8826242952
12              201          91              72 0.2723287671
13               92          11              15 0.8121477771
14              213         231             110 0.0069605568
15              373         677             227 0.1748211731
16              160           0              11 0.9672663668
17              267         285             149 0.3120710537
18              392         379             195 0.0420982292
19              193          63              52 0.7017738359
20              253         236             139 0.0073619632
21              292          88             102 0.4959412447
22              127          21              23 0.4292912328
23              214         164             106 0.0955102041
24              393         110             113 0.7240424550
25              211         343             127 0.0331027668
26              229          77              93 0.7160053500
27              188         345             131 0.0945656825
28              319         219             146 0.3765239580
29              314         124             184 0.4499402628
30              270         267             152 0.1896343913
31              562        1320             389 0.0101279318
32              133          10              13 0.7890699904
33              168         133              97 0.6876712329
34              185          74              66 0.8783114993
35              111          71              88 0.7769337017
36              517        1100             351 0.2809200603
37              275           5               9 0.7588285960
38              369         515             223 0.2752808989
39              145          61              69 0.7307692308
40              112          85              40 0.6547511312
41              212         422             124 0.3314462172
42              205           0              11 0.6438167413
43              338         382             254 0.6257242178
44              245         162             113 0.0466339411
45              104          30              45 0.8187009279
46              146          32              36 0.9624626983
47              238         257             114 0.0099473376
48              203          82             130 0.8614906832
49              186         119              88 0.0109965636
50              230         178             132 0.0051903114
51               83          39              50 0.9594450374
52              501         369             257 0.0006756757
53               86          55              48 0.8624260355
54              376         640             249 0.0104447439
55              128          92              76 0.8155152451
56              347         205             151 0.0119834711
57              161          12              20 0.6421480144
58              182         165              75 0.0191169777
59              372         267             203 0.4666369114
60              245         120             126 0.9239694656
61              146           0              11 0.8326732673
62              279         338             126 0.0297684675
63              222         223             111 0.6200000000
64              427         409             272 0.5751789976
65              219         207             152 0.0577864838
66              194         151              90 0.0264227642
67              154          22              32 0.0029673591
68              328         287             279 0.0078796562
69              109         126              43 0.0016129032
70              209         225             146 0.0711246201
71              318         295             176 0.6276295133
72             1049         877             402 0.4565002122
73              511         729             342 0.4494288681
74              107           3               3 0.3470790378
75              265          65              53 0.5371613799
76              226         260             108 0.1233576642
77              370         259             194 0.7859864522
78              137          58              65 0.8818867925
79              267         234             117 0.8199242783
80              358         227             188 0.0027945971
81              146         128              75 0.0049358342
82              359         202             138 0.0135463703
83              333         387             226 0.0025985275
84              307         429             224 0.0112855741
85              269         231             133 0.5069637883
86              250          80             127 0.6976798688
87              632         742             398 0.2747811928
88              343         336             186 0.0154010695
89               70           0              11 0.6095054592
90              250         103              88 0.5261643119
91              125          35              41 0.9708650829
92               65           0              11 0.7161334241
93              583         813             385 0.4729480074
94              336         953             248 0.0139553429
95              253         179             138 0.1236649803
96              388         473             269 0.4432497013
97              321         235             227 0.0327476038
98              160         153              89 0.0598892803
99              214          37              48 0.6178606002
100             394         459             205 0.5354420732
101             531         407             301 0.4885016170
102             238          92              89 0.9260191243
103             331         493             211 0.1223760607
104             266         274             162 0.8930041152
105             341         606             239 0.0049315068
106             435         391             302 0.0139664804</code></pre>
</div>
</div>
</section>
<section id="visualize-data" class="level3">
<h3 class="anchored" data-anchor-id="visualize-data">Visualize Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>stl_lead_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> stl_lead_prop, <span class="fu">aes</span>(<span class="at">x =</span> pct_elevated, <span class="at">y =</span> white <span class="sc">*</span> <span class="fl">100.0</span> <span class="sc">/</span> total_pop, <span class="at">color =</span> poverty_tot <span class="sc">*</span> <span class="dv">100</span> <span class="sc">/</span> total_pop)) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Children with elevated blood levels (%) </span><span class="sc">\n</span><span class="st"> vs White Identifying (%)"</span>, </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Percentage of children with </span><span class="sc">\n</span><span class="st"> elevated blood lead levels"</span>, </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percent identifying as white"</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Percentage of impoverished individuals (%)"</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"lightgreen"</span>, <span class="at">high =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>stl_lead_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stl_lead_inequity_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"figs"</span>, <span class="st">"stl_lead_plot.png"</span>), <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
</div>
<p>It seems like in areas with a higher percentage of white identifying individuals, the percentage of children with elevated blood lead levels is lower.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pct_elevated_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> stl_lead_prop, <span class="fu">aes</span>(<span class="at">x =</span> pct_elevated)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>pct_elevated_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stl_lead_inequity_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"figs"</span>, <span class="st">"pct_elevated_plot.png"</span>), <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>